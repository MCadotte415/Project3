

# import the required modules and libraries
from flask import Flask, render_template, jsonify
import pandas as pd
import json
import plotly
import plotly.express as px

# load the data from the CSV file
df = pd.read_csv("state_dog.csv")

# create a Flask application
app = Flask(__name__)

# define the route for the visualization
@app.route('/dogs_by_age')
def dogs_by_age():
    # generate the visualization using Plotly Express
    fig = px.treemap(data_frame=df, path=['age','size','breed_primary','sex','name','url'], title="Dogs by Age")
    fig.update_traces(root_color="lightgrey")
    fig.update_layout(
        uniformtext=dict(minsize=10, mode='hide'),
        margin=dict(t=50, l=25, r=25, b=20)
    )
    fig.update_traces(hovertemplate='')
    
 #  convert the visualization to JSON format and return it
    return jsonify(fig.to_json())


# run the Flask application
if __name__ == '__main__':
    app.run(debug=True)
